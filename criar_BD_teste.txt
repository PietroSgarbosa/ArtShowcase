CREATE TABLE CADASTRO_USUARIO (
  CODI_USUAR int(11) NOT NULL auto_increment,
  NOME_USUAR varchar(45) NOT NULL,
  NICK_USUAR varchar(45) NOT NULL,
  MAIL_USUAR varchar(45) NOT NULL,
  CELU_USUAR varchar(16),
  DESC_USUAR varchar(200),
  SENH_USUAR varchar(45) NOT NULL,
  IDAD_USUAR int(3)  NOT NULL,
  SEXO_USUAR varchar(20) NOT NULL,
  IMAG_PERFI LONGTEXT,
  DATA_CADAS timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (CODI_USUAR)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;


CREATE TABLE UPLOAD_IMAGENS (
   CODI_IMAGE INT(11) NOT NULL auto_increment,
   CODI_USUAR INT(11) NOT NULL,
   IMAG_PORTI LONGTEXT,
   TITU_IMAGE VARCHAR(25),
   DESC_IMAGE VARCHAR(100),
   PRIMARY KEY (CODI_IMAGE,CODI_USUAR) USING BTREE,
   KEY FKusuar (CODI_USUAR),
  CONSTRAINT FKusuar FOREIGN KEY (CODI_USUAR) REFERENCES cadastro_usuario (CODI_USUAR)
  ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE campeonatos (
  CODI_CAMPE int(11) NOT NULL auto_increment,
  CODI_SITUA int NOT NULL,
  CODI_USUAR int NOT NULL,
  TITU_CAMPE varchar(25) NOT NULL,
  DESC_CAMPE varchar(45),
  TEMA_CAMPE varchar(45),
  DATA_CRIAC timestamp DEFAULT CURRENT_TIMESTAMP,
  DATA_INSCR date,
  DATA_ENCER date,
  VENC_CAMPE int,
  PRIMARY KEY (CODI_CAMPE) USING BTREE,
  KEY FKsituacao (CODI_SITUA),
  KEY FKcriador (CODI_USUAR) ,
  CONSTRAINT FKcriador FOREIGN KEY (CODI_USUAR) REFERENCES cadastro_usuario (CODI_USUAR) ON DELETE NO ACTION ON UPDATE NO ACTION	
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE participantes_campeonato (
  CODI_PARTI int(11) NOT NULL AUTO_INCREMENT,
  CODI_CAMPE int(11) NOT NULL,
  CODI_USUAR int(11) NOT NULL,
  CODI_IMAGE INT(11) NOT NULL,
  QTDE_VOTOS int(20), 
  PRIMARY KEY (CODI_PARTI) USING BTREE,	
  CONSTRAINT FKcampeonato FOREIGN KEY (CODI_CAMPE) REFERENCES campeonatos (CODI_CAMPE) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT FKusuario FOREIGN KEY (CODI_USUAR) REFERENCES UPLOAD_IMAGENS (CODI_USUAR) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `controle_votos` (
  `NUME__VOTO` int(11) NOT NULL auto_increment,
  `CODI_USUAR` int(11) NOT NULL,
  `CODI_CAMPE` int(11) NOT NULL,
  `CODI_IMAGE` int(11) NOT NULL,
  `CODI_PARTI` int(11) NOT NULL,
  `DATA_VOTAD` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`NUME__VOTO`,`CODI_USUAR`) USING BTREE,
  KEY `FKvotos` (`CODI_USUAR`),
  CONSTRAINT `FKcontrole_usuario` FOREIGN KEY (`CODI_USUAR`) REFERENCES `cadastro_usuario` (`CODI_USUAR`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `FKcontrole_parti` FOREIGN KEY (`CODI_PARTI`) REFERENCES `participantes_campeonato` (`CODI_USUAR`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8;



